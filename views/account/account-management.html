<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Account Management</title>
    <link rel="stylesheet" href="/assets/admin-users-account.css" />
    <link rel="stylesheet" href="/assets/desktop-shared.css" />
    <link rel="stylesheet" href="/assets/moblie-nav.css" />
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
        }

        .page-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding-top: 60px;
            box-sizing: border-box;
        }

        .main-content {
            flex-grow: 1;
            padding: 25px 0;
        }

        .desktop-footer {
            background: #4a0072;
            padding: 30px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        @media (min-width: 720px) {
            .page-wrapper {
                padding-top: 0;
            }

            .main-content {
                padding: 30px;
            }
        }
    </style>
</head>

<body>
    <!-- Mobile Nav -->
    <nav class="mobile-nav">
        <a href="/" class="mobile-logo">dokmai4u Shop</a>
        <div id="hamburger-icon" class="hamburger-icon">
            <span></span><span></span><span></span>
        </div>
    </nav>

    <div id="mobile-menu" class="mobile-menu">
        <a href="/">Home</a>
        <a href="/search">Search</a>
        <a href="/product">Product</a>
    </div>

    <!-- Desktop Nav -->
    <nav class="desktop-nav">
        <a href="/" class="logo">dokmai4u Shop</a>
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="/search">Search</a>
            <a href="/product">Product</a>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="page-wrapper">
        <main class="main-content">
            <div class="admin-container">
                <form id="searchForm" class="am-toolbar">
                    <!-- <input type="text" class="am-search-bar" placeholder="Enter Admin ID or Username" name="searchKey"
                        required />
                    <button type="submit" class="am-search-btn">Search</button> -->
                    <a href="/account/search" class="am-search-btn">Search</a>
                    <a href="/account/add" class="am-add-btn">Add</a>
                </form>
                <div id="result" class="search-results"></div>
            </div>

            <!-- Account List (3 accounts) -->
            <div class="am-account-list">
                <!-- Account 1 -->
                <div class="am-account-item">
                    <div class="am-account-icon">üë§</div>
                    <div class="am-account-info">
                        <h4>User1</h4>
                        <p>Role: Admin</p>
                    </div>
                </div>
                <!-- Account 2 -->
                <div class="am-account-item">
                    <div class="am-account-icon">üë§</div>
                    <div class="am-account-info">
                        <h4>User2</h4>
                        <p>Role: Admin</p>
                    </div>
                </div>
                <!-- Account 3 -->
                <div class="am-account-item">
                    <div class="am-account-icon">üë§</div>
                    <div class="am-account-info">
                        <h4>User3</h4>
                        <p>Role: Admin</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="desktop-footer">
        <div class="footer-column left">
            <h4>For Admin</h4>
            <a href="/product">Product Management</a>
            <h4>For Super Admin</h4>
            <a href="/account">Account Management</a>
            <form action="/auth/logout" method="POST" class="am-toolbar">
                <button type="submit">Logout</button>
            </form>
        </div>
        <div class="footer-column right">
            <h4>About us</h4>
            <a href="/team">Team</a>
            <h4>Contact</h4>
            <p>contact@dokmai4u.com</p>
            <p>012-345-6789</p>
        </div>
    </footer>

    <script src="/assets/moblie-nav.js" defer></script>
    <script>
        document.getElementById("searchForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const searchKey = e.target.searchKey.value;
            const res = await fetch("/account/search", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ searchKey }),
            });

            const data = await res.json();
            const resultDiv = document.getElementById("result");

            if (!data.length) {
                resultDiv.innerHTML = `<p>No results found.</p>`;
                return;
            }

            resultDiv.innerHTML = data
                .map(
                    (user) => `
          <div class="search-result-item">
            <div class="search-result-header">
              <div class="am-account-icon">üë®üèª‚Äçüíº</div>
              <div class="am-account-info">
                <h4>${user.Username}</h4>
                <p>Role: ${user.Role}</p>
              </div>
            </div>
            <div class="search-result-actions">
              <a href="/account/update/${user.AdminID}" class="btn-update">Update</a>
              <a href="/account/delete/${user.AdminID}" class="btn-delete">Delete</a>
            </div>
          </div>`
                )
                .join("");
        });
    </script>
</body>

</html>